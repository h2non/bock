/*! bock - v0.1.0-beta.1 - MIT License - https://github.com/h2non/bock */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.bock=t()}}(function(){var t,r,e;return function n(t,r,e){function o(s,u){if(!r[s]){if(!t[s]){var f=typeof require=="function"&&require;if(!u&&f)return f(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(r){var e=t[s][1][r];return o(e?e:r)},p,p.exports,n,t,r,e)}return r[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<e.length;s++)o(e[s]);return o}({1:[function(t,r,e){var n=t("./utils");var o=t("./store");var i=t("./proxy");r.exports=s;function s(t,r,e){this.id=n.uuid();this.service=t;this.config=n.merge({},s.defaults,{url:u(r)},e)}s.defaults={url:location.href,method:"GET",headers:null,crendetials:"omit",persist:true};s.prototype=Object.create(i.prototype);s.prototype.get=function(t){this.config.method="GET";this.config.url+=t;return this};s.prototype.post=function(t,r){this.config.method="POST";this.config.url+=t;return this};s.prototype.put=function(t,r){this.config.method="PUT";this.config.url+=t;return this};s.prototype.delete=function(t,r){this.config.method="DELETE";this.config.url+=t;return this};s.prototype.patch=function(t,r){this.config.method="PATCH";this.config.url+=t;return this};s.prototype.head=function(t,r){this.config.method="HEAD";this.config.url+=t;return this};s.prototype.headers=function(t){this.config.headers=t;return this};s.prototype.params=function(t){this.config.params=t;return this};s.prototype.auth=function(t,r){this.config.username=t;this.config.password=r;return this};s.prototype.times=function(t){this.config.times=t;this.config.persist=false;return this};s.prototype.body=function(t){this.config.body=t;return this};s.prototype.replyHeaders=s.prototype.replyWithHeaders=function(t){this.config.responseHeaders=t;return this};s.prototype.replyBody=s.prototype.replyWithBody=function(t){this.config.responseBody=t;return this};s.prototype.reply=s.prototype.replyWith=function(t,r,e){this.config.responseCode=t==null?200:t;if(r){this.config.responseBody=r}if(e){this.config.responseHeaders=e}return this.forward()};s.prototype.delay=function(t){this.config.delay=t;return this};s.prototype.forward=function(){o.append(this);return this.service.append(this.id,this.config).catch(f)};function u(t){return t.replace(/\/\/+(\s+)?$/g,"/")}function f(t){throw t}},{"./proxy":3,"./store":5,"./utils":6}],2:[function(t,r,e){var n=t("./bock");var o=t("./store");var i=t("./service");var s=t("./utils").merge;var u="serviceWorker"in navigator;r.exports=f;function f(t,r){var e=c(r);return new n(e,t,r)}f.VERSION="0.1.0-beta.1";f.workerPath="/bock.worker.js";f.isControllable=f.isEnabled=function(){return navigator.serviceWorker.controller!=null};f.stop=function(){return i().unregister()};f.cleanAll=function(){o.flush();return i().flush()};f.entries=function(){return o.all()};function c(t){if(!u){throw new Error("ServiceWorker is not supported in the current browser")}return i(s({path:f.workerPath},t))}},{"./bock":1,"./service":4,"./store":5,"./utils":6}],3:[function(t,r,e){r.exports=n;function n(){}n.prototype.withMethod=function(t){this.config.proxyMethod=t.toUpperCase();return this};n.prototype.withHeaders=function(t){this.config.proxyHeaders=t;return this};n.prototype.withBody=function(t){this.config.proxyBody=t;return this};n.prototype.credentials=function(t){this.config.credentials=t;return this};n.prototype.proxy=n.prototype.proxyTo=function(t,r,e){this.config.proxy=t;if(r){this.config.proxyBody=r}if(e){this.config.proxyHeaders=e}return this}},{}],4:[function(t,r,e){var n=navigator.serviceWorker;var o=null;var i=null;r.exports=s;function s(t){if(!o){o=new u(t)}return o}function u(t){this.service=p(t)}u.prototype.append=function(t,r){return f.call(this,{topic:"bock.append",id:t,config:r})};u.prototype.remove=function(t){return f.call(this,{topic:"bock.remove",id:t})};u.prototype.flush=function(t){return f.call(this,{topic:"bock.flush"})};u.prototype.unregister=function(){if(i){return i.unregister()}else{return Promise.resolve(null)}};function f(t){return new Promise(function(r,e){this.service().then(function(e){var n=c(e);n.postMessage(t);r(n)}).catch(e)}.bind(this))}function c(t){i=t;if(t.installing){return t.installing}else{return t.active}}function p(t){return function(){if(i){return Promise.resolve(i)}else{return n.register(t.path,{scope:h(t)})}}}function h(t){var r=t.path;if(!/^http[s]?\/\//i.test(r)){r=location.origin+r}return new URL(r).pathname.split("/").slice(0,-1).join("/")+"/"}},{}],5:[function(t,r,e){var n=[];var o=e;o.append=function(t){n.push(t)};o.remove=function(t){var r=o.get(t);if(r)n.splice(n.indexOf(r),1)};o.get=function(t){var r,e,o=typeof t==="string";for(r=0,e=n.length;r<e;r+=1){if(o&&n[r].id===t||n[r]===t){return n[r]}}return null};o.all=function(){return n.map(function(t){return{id:t.id,config:t.config}})};o.flush=function(){n.splice(0)}},{}],6:[function(t,r,e){e.merge=function(t,r){var r=Array.prototype.slice.call(arguments).slice(1);r.forEach(function(r){for(var e in r){t[e]=r[e]}});return t};e.uuid=function(){var t="",r,e;for(r=0;r<32;r++){e=Math.random()*16|0;if(r===8||r===12||r===16||r===20)t+="-";t+=(r===12?4:r===16?e&3|8:e).toString(16)}return t}},{}]},{},[2])(2)});
//# sourceMappingURL=http://cdn.rawgit.com/h2non/bock/0.1.0-beta.1/bock.min.js.map