/*! bock - v0.1.0-beta.0 - MIT License - https://github.com/h2non/bock */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.bock=t()}}(function(){var t,r,e;return function o(t,r,e){function n(s,u){if(!r[s]){if(!t[s]){var c=typeof require=="function"&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(r){var e=t[s][1][r];return n(e?e:r)},p,p.exports,o,t,r,e)}return r[s].exports}var i=typeof require=="function"&&require;for(var s=0;s<e.length;s++)n(e[s]);return n}({1:[function(t,r,e){var o=t("./utils");var n=t("./store");var i=t("./proxy");r.exports=s;function s(t,r,e){this.id=o.uuid();this.service=t;this.config=o.merge({},s.defaults,{url:u(r)},e)}s.defaults={url:location.href,method:"GET",headers:null,crendetials:"omit",persist:true};s.prototype=Object.create(i.prototype);s.prototype.get=function(t){this.config.method="GET";this.config.url+=t;return this};s.prototype.post=function(t,r){this.config.method="POST";this.config.url+=t;return this};s.prototype.put=function(t,r){this.config.method="PUT";this.config.url+=t;return this};s.prototype.delete=function(t,r){this.config.method="DELETE";this.config.url+=t;return this};s.prototype.patch=function(t,r){this.config.method="PATCH";this.config.url+=t;return this};s.prototype.head=function(t,r){this.config.method="HEAD";this.config.url+=t;return this};s.prototype.headers=function(t){this.config.headers=t;return this};s.prototype.params=function(t){this.config.params=t;return this};s.prototype.auth=function(t,r){this.config.username=t;this.config.password=r;return this};s.prototype.times=function(t){this.config.times=t;this.config.persist=false;return this};s.prototype.body=s.prototype.withBody=function(t){this.config.body=t};s.prototype.replyHeaders=s.prototype.replyWithHeaders=function(t){this.config.responseHeaders=t;return this};s.prototype.replyBody=s.prototype.replyWithBody=function(t){this.config.responseBody=t;return this};s.prototype.reply=s.prototype.reply=s.prototype.replyWith=function(t,r,e){this.config.responseCode=t==null?200:t;if(r){this.config.responseBody=r}if(e){this.config.responseHeaders=e}this.forward();return this};s.prototype.forward=function(){return this.service.add(this.id,this.config)};function u(t){return t.replace(/\/\/+(\s+)?$/g,"/")}},{"./proxy":3,"./store":5,"./utils":6}],2:[function(t,r,e){var o=t("./utils");var n=t("./bock");var i=t("./service");var s="serviceWorker"in navigator;r.exports=u;function u(t,r){var e=c(r);return new n(e,t,r)}function c(t){if(!s){throw new Error("Service Worker is not supported in the current browser")}return i(o.merge({path:u.workerPath},t))}u.VERSION="0.1.0-beta.0";u.workerPath="/bock.worker.js";u.Bock=n;u.isControllable=function(){return navigator.serviceWorker.controller!=null};u.stop=function(){return i().stop()}},{"./bock":1,"./service":4,"./utils":6}],3:[function(t,r,e){r.exports=o;function o(){}o.prototype.withMethod=function(t){this.config.proxyMethod=t.toUpperCase();return this};o.prototype.withHeaders=function(t){this.config.proxyHeaders=t;return this};o.prototype.withBody=function(t){this.config.proxyBody=t;return this};o.prototype.credentials=function(t){this.config.credentials=t;return this};o.prototype.proxy=o.prototype.proxyTo=function(t,r,e){this.config.proxy=t;if(r){this.config.proxyBody=r}if(e){this.config.proxyHeaders=e}return this}},{}],4:[function(t,r,e){var o=navigator.serviceWorker;var n=null;var i=null;r.exports=s;function s(t){if(!n){n=new u(t)}return n}function u(t){this.service=p(t)}u.prototype.add=function(t,r){return c.call(this,{topic:"bock.add",id:t,config:r})};u.prototype.remove=function(t,r){return c.call(this,{topic:"bock.remove",id:t,config:r})};u.prototype.remove=function(t){return c.call(this,{topic:"bock.remove",id:t})};u.prototype.flush=function(t){return c.call(this,{topic:"bock.flush"})};u.prototype.close=function(){var t=Promise.resolve(null);if(i){t=i.unregister()}return t};function c(t){return new Promise(function(r,e){this.service().then(function(e){var o=f(e);o.postMessage(t);r(o)}).catch(e)}.bind(this))}function f(t){i=t;if(t.installing){return t.installing}else{return t.active}}function p(t){return function(){if(i){return Promise.resolve(i)}else{return o.register(t.path,{scope:h(t)})}}}function h(t){var r=t.path;if(!/^http[s]?\/\//i.test(r)){r=location.origin+r}return new URL(r).pathname.split("/").slice(0,-1).join("/")+"/"}},{}],5:[function(t,r,e){var o=e;var n=[];o.append=function(t){n.push(t)};o.remove=function(t){var r=o.get(t);if(r)n.splice(1,r.indexOf(r))};o.get=function(t){for(var r=0,e=n.length;r<e;r+=1){if(n[r].id===t){return n[r]}}return null};o.flush=function(){n.splice(0)};o.all=function(){return n.slice()}},{}],6:[function(t,r,e){e.merge=function(t,r){var r=Array.prototype.slice.call(arguments).slice(1);r.forEach(function(r){for(var e in r){t[e]=r[e]}});return t};e.uuid=function(){var t="",r,e;for(r=0;r<32;r++){e=Math.random()*16|0;if(r===8||r===12||r===16||r===20)t+="-";t+=(r===12?4:r===16?e&3|8:e).toString(16)}return t}},{}]},{},[2])(2)});
//# sourceMappingURL=http://cdn.rawgit.com/h2non/bock/0.1.0-beta.0/bock.min.js.map